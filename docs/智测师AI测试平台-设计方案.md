# 智测师AI测试平台 设计方案

## 一、产品逻辑

### 1.1 产品定位
智测师AI测试平台是一款面向提示词工程师、AI开发者、产品经理和研究人员的专业AI测试工具。平台聚焦于多模型、多提示词、多输入的批量测试与对比，支持本地数据安全、灵活API/模型配置、结果可视化与导出、历史追溯、国际化等特性，适合团队协作和持续迭代。

### 1.2 核心功能
- **首页仪表盘**：展示测试统计、指标卡片、图表和新手引导。
- **接口测试**：支持批量输入、提示词与模型灵活组合、重复测试、进度与状态实时反馈。
- **模型对比**：多问题×多提示词×多模型×多轮测试，结果分表对比，支持导出。
- **提示词管理**：增删改查、搜索、批量导入导出。
- **API配置与模型管理**：多API配置，自动获取模型列表，模型图标自动匹配，批量管理。
- **测试历史**：统一主表，支持single/compare类型区分，兼容老数据，便于扩展。
- **结果导出**：Excel/CSV/剪贴板多格式导出。
- **用户与权限**：多角色隔离，超级管理员系统，安全本地存储。
- **国际化**：中英文切换，适配全球用户。

### 1.3 用户流程
1. 首页查看统计与引导
2. 配置API与模型（支持自动获取模型）
3. 创建/管理提示词
4. 进入接口测试或模型对比，批量输入测试
5. 实时查看进度与结果，支持中断
6. 导出结果或查看历史
7. 管理用户与权限（如有）

## 二、技术解决方案

### 2.1 前端架构
- **技术栈**：React 18 + TypeScript + Ant Design + Tailwind CSS
- **工程配置**：Vite + vite-plugin-svgr，支持SVG组件化，路径别名@，严格类型校验
- **UI/UX**：现代化渐变主题、分层卡片、响应式布局、统一设计语言
- **SVG图标自动匹配**：模型名/ID关键词自动匹配SVG，未命中用default-ai.svg
- **国际化**：i18n多语言，动态切换
- **状态管理**：本地localStorage/SQLite，简化存储方案，兼容Electron与Web
- **错误与通知**：Notification系统，智能提醒，持久化关闭状态

### 2.2 后端与桌面端
- **Electron集成**：主进程与渲染进程分离，安全IPC通信
- **数据存储**：本地SQLite（桌面端）或localStorage（Web端），数据隔离与安全
- **API代理**：支持本地proxy-server，兼容ESM/CJS，自动适配API路径
- **构建与打包**：Electron Builder，分平台优化，禁用不必要压缩，保护关键依赖
- **CI/CD**：GitHub Actions分批依赖安装，平台特异脚本，自动发布与版本管理

### 2.3 兼容性与工程优化
- **ESM/CJS兼容**：package.json加type:module，postcss.config.cjs，proxy-server.cjs
- **SVG类型声明**：src/svg.d.ts，支持?react后缀导入
- **依赖管理**：分批安装、版本锁定、依赖完整性校验
- **构建优化**：清理大依赖，保护构建工具，禁用npm rebuild
- **故障自愈**：自动修复脚本、调试工具、详细日志

## 三、数据处理策略

### 3.1 数据结构设计
- **提示词**：[{id, name, content, createdAt, updatedAt}]
- **API配置**：[{id, name, baseUrl, apiKey, models, createdAt, updatedAt}]
- **模型**：[{id, name, displayName, apiConfigId, enabled, icon}]
- **测试输入**：[{id, name, content, category, createdAt}]
- **测试历史主表**：[{id, type, config, result, createdAt, ...}]
  - type: single/compare
  - config/result结构按type区分，兼容老数据

### 3.2 数据存储与安全
- **本地优先**：所有敏感数据本地存储，API密钥不上传
- **SQLite/LocalStorage**：桌面端用SQLite，Web端用localStorage，接口统一
- **数据隔离**：多用户隔离，权限严格校验
- **备份与恢复**：支持导出/导入JSON，定期备份

### 3.3 数据流与同步
- **前端状态与存储同步**：所有操作先本地更新，后持久化
- **历史兼容**：新旧数据结构自动识别，渲染与导出按type分发
- **批量任务生成**：模型对比批量生成任务，结果分表存储
- **错误恢复**：数据损坏自动重置为默认值，日志提示

### 3.4 性能与扩展
- **批量操作优化**：大批量测试分批处理，防止阻塞
- **导出优化**：大数据量分片导出，防止内存溢出
- **结构可扩展**：主表+type分发，便于后续扩展更多测试类型

## 四、界面与交互设计要点
- 首页：极淡渐变背景+白色内容区+阴影+圆角，统计卡片分层感强
- 统计卡片：浅灰背景、深灰边框、数字加粗、标题深灰
- 模型图标：自动匹配SVG，提升辨识度
- 通知系统：右上角固定，智能提醒，用户可控
- 结果区：分表对比、可视化、导出
- 历史区：主表统一，兼容扩展

## 五、标准流程与运维
- 版本升级：严格按VERSION-UPDATE-GUIDE.md，文档、代码、tag同步
- 构建发布：多平台兼容，自动化脚本，详细日志
- 故障排查：TROUBLESHOOTING.md、快速修复指南、调试工具
- 数据安全：本地隔离、权限校验、定期备份

---

*本设计方案适用于智测师AI测试平台全栈开发与团队协作，支持持续扩展与演进。*

## 六、后续扩展建议
- **主题切换**：支持深色/浅色主题，提升可用性
- **团队协作**：配置云同步、团队共享、权限分级
- **智能推荐**：基于历史数据推荐模型/提示词/参数
- **自动化测试**：定时任务、回归测试、性能监控
- **可视化增强**：更多图表、趋势分析、模型性能对比
- **API生态**：支持更多AI服务商、插件扩展机制

## 七、参考文档与最佳实践
- [UI改进完成总结.md](./UI改进完成总结.md)
- [功能改进完成总结.md](./功能改进完成总结.md)
- [BUILD-FIX.md](./BUILD-FIX.md)
- [ELECTRON-BUILD-GUIDE.md](./ELECTRON-BUILD-GUIDE.md)
- [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)
- [VERSION-UPDATE-GUIDE.md](../VERSION-UPDATE-GUIDE.md)

---

**最后更新：2024年12月**

**方案撰写：智测师AI测试平台产品与技术团队**

---

*如需详细技术实现、数据结构样例或UI原型，请参考项目内相关文档或联系团队。*