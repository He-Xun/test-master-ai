import{r as o,I as We,_ as Ce,K as Ze,g as wt,m as jt,u as z,a as tt,C as $n,b as Sn,c as Nn,d as Fe,e as Ct,f as q,N as In,R as wn,h as jn,i as Cn,j as En,k as Pn,l as A,n as Tn,o as Rn,p as On,q as Dn,s as en,t as tn,v as ne,w as Mn,x as et,y as zn,z as _n,A as gt,B as nn,D as Bn,E as An,F as kn,G as vt,H as Ln,J as Fn,L as Vn,M as Hn,O as Gn,P as sn,Q as Wn,S as qn,T as Un,U as Xn,V as Kn,W as Jn,X as Yn,Y as Qn,Z as Zn,$ as es,a0 as ts,a1 as an,a2 as ns,a3 as ss,a4 as _t,a5 as Bt,a6 as as,a7 as rs,a8 as rn,a9 as is,aa as os,ab as ls,ac as At,ad as cs,ae as ds,af as us,ag as gs,ah as ms,ai as ps,aj as fs,ak as hs,al as Qe,am as bt,an as W,ao as s,ap as he,aq as xs,ar as J,as as rt,at as He,au as it,av as kt,aw as Lt,ax as vs,ay as bs,az as Ft,aA as ot}from"./index-CFiG4jUx.js";import{c as ys}from"./api-BgJXedR7.js";import{c as $s,e as Ss,a as Ns,b as Is}from"./export-AE7HwFIg.js";import{C as ws,R as js,F as Ge}from"./index-C-rmEvZ_.js";import{P as Cs,S as Es,C as Vt,a as Ht,F as Ps}from"./Table-BajktlNK.js";import{T as ze}from"./index-BtKM4wLR.js";import{S as Gt,R as yt}from"./index-BXFIHTMJ.js";import{u as Ts,r as Wt,R as qt}from"./useBreakpoint-BeMf8Kwx.js";import{R as $t}from"./ReloadOutlined-36gt7DSb.js";import{A as Rs}from"./index-C-L4OT4O.js";import{I as Os}from"./index-BIFbDk8c.js";import{R as Ds}from"./AppstoreOutlined-DL08C6ad.js";import{R as Ms}from"./InfoCircleOutlined-CJJ1fdZK.js";import{R as St}from"./DownloadOutlined-_TPnELU8.js";import{P as zs}from"./progress-Cw9T4vZd.js";import{C as _s}from"./Collapse-KgqCS7jy.js";var Bs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},As=function(t,n){return o.createElement(We,Ce({},t,{ref:n,icon:Bs}))},ks=o.forwardRef(As),Ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},Fs=function(t,n){return o.createElement(We,Ce({},t,{ref:n,icon:Ls}))},Vs=o.forwardRef(Fs),Hs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Gs=function(t,n){return o.createElement(We,Ce({},t,{ref:n,icon:Hs}))},Ut=o.forwardRef(Gs),Ws={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},qs=function(t,n){return o.createElement(We,Ce({},t,{ref:n,icon:Ws}))},Us=o.forwardRef(qs),Xs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Ks=function(t,n){return o.createElement(We,Ce({},t,{ref:n,icon:Xs}))},Js=o.forwardRef(Ks),Ys={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},Qs=function(t,n){return o.createElement(We,Ce({},t,{ref:n,icon:Ys}))},Zs=o.forwardRef(Qs);const ea=e=>{const{componentCls:t,notificationMarginEdge:n,animationMaxHeight:a}=e,i=`${t}-notice`,l=new Ze("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),d=new Ze("antNotificationTopFadeIn",{"0%":{top:-a,opacity:0},"100%":{top:0,opacity:1}}),u=new Ze("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(a).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),g=new Ze("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[i]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:d}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:u}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:l}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[i]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:g}}}}},ta=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],na={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},sa=(e,t)=>{const{componentCls:n}=e;return{[`${n}-${t}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[na[t]]:{value:0,_skip_check_:!0}}}}},aa=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},ra=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},ia=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`transform ${e.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},aa(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},ra(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},ta.map(n=>sa(e,n)).reduce((n,a)=>Object.assign(Object.assign({},n),a),{}))},on=e=>{const{iconCls:t,componentCls:n,boxShadow:a,fontSizeLG:i,notificationMarginBottom:l,borderRadiusLG:d,colorSuccess:u,colorInfo:g,colorWarning:f,colorError:m,colorTextHeading:$,notificationBg:S,notificationPadding:P,notificationMarginEdge:w,notificationProgressBg:T,notificationProgressHeight:M,fontSize:R,lineHeight:N,width:j,notificationIconSize:v,colorText:F}=e,O=`${n}-notice`;return{position:"relative",marginBottom:l,marginInlineStart:"auto",background:S,borderRadius:d,boxShadow:a,[O]:{padding:P,width:j,maxWidth:`calc(100vw - ${z(e.calc(w).mul(2).equal())})`,overflow:"hidden",lineHeight:N,wordWrap:"break-word"},[`${O}-message`]:{marginBottom:e.marginXS,color:$,fontSize:i,lineHeight:e.lineHeightLG},[`${O}-description`]:{fontSize:R,color:F},[`${O}-closable ${O}-message`]:{paddingInlineEnd:e.paddingLG},[`${O}-with-icon ${O}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(v).equal(),fontSize:i},[`${O}-with-icon ${O}-description`]:{marginInlineStart:e.calc(e.marginSM).add(v).equal(),fontSize:R},[`${O}-icon`]:{position:"absolute",fontSize:v,lineHeight:1,[`&-success${t}`]:{color:u},[`&-info${t}`]:{color:g},[`&-warning${t}`]:{color:f},[`&-error${t}`]:{color:m}},[`${O}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},Sn(e)),[`${O}-progress`]:{position:"absolute",display:"block",appearance:"none",inlineSize:`calc(100% - ${z(d)} * 2)`,left:{_skip_check_:!0,value:d},right:{_skip_check_:!0,value:d},bottom:0,blockSize:M,border:0,"&, &::-webkit-progress-bar":{borderRadius:d,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:T},"&::-webkit-progress-value":{borderRadius:d,background:T}},[`${O}-actions`]:{float:"right",marginTop:e.marginSM}}},oa=e=>{const{componentCls:t,notificationMarginBottom:n,notificationMarginEdge:a,motionDurationMid:i,motionEaseInOut:l}=e,d=`${t}-notice`,u=new Ze("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},tt(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:a,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:l,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:l,animationFillMode:"both",animationDuration:i,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:u,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${d}-actions`]:{float:"left"}}})},{[t]:{[`${d}-wrapper`]:Object.assign({},on(e))}}]},ln=e=>({zIndexPopup:e.zIndexPopupBase+$n+50,width:384}),cn=e=>{const t=e.paddingMD,n=e.paddingLG;return jt(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:n,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${z(e.paddingMD)} ${z(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},dn=wt("Notification",e=>{const t=cn(e);return[oa(t),ea(t),ia(t)]},ln),la=Nn(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,n=cn(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},on(n)),{width:n.width,maxWidth:`calc(100vw - ${z(e.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}},ln);var ca=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};function Et(e,t){return t===null||t===!1?null:t||o.createElement(wn,{className:`${e}-close-icon`})}const da={success:Pn,info:En,error:Cn,warning:jn},un=e=>{const{prefixCls:t,icon:n,type:a,message:i,description:l,actions:d,role:u="alert"}=e;let g=null;return n?g=o.createElement("span",{className:`${t}-icon`},n):a&&(g=o.createElement(da[a]||null,{className:q(`${t}-icon`,`${t}-icon-${a}`)})),o.createElement("div",{className:q({[`${t}-with-icon`]:g}),role:u},g,o.createElement("div",{className:`${t}-message`},i),o.createElement("div",{className:`${t}-description`},l),d&&o.createElement("div",{className:`${t}-actions`},d))},ua=e=>{const{prefixCls:t,className:n,icon:a,type:i,message:l,description:d,btn:u,actions:g,closable:f=!0,closeIcon:m,className:$}=e,S=ca(e,["prefixCls","className","icon","type","message","description","btn","actions","closable","closeIcon","className"]),{getPrefixCls:P}=o.useContext(Fe),w=g??u,T=t||P("notification"),M=`${T}-notice`,R=Ct(T),[N,j,v]=dn(T,R);return N(o.createElement("div",{className:q(`${M}-pure-panel`,j,n,v,R)},o.createElement(la,{prefixCls:T}),o.createElement(In,Object.assign({},S,{prefixCls:T,eventKey:"pure",duration:null,closable:f,className:q({notificationClassName:$}),closeIcon:Et(T,m),content:o.createElement(un,{prefixCls:M,icon:a,type:i,message:l,description:d,actions:w})}))))};function ga(e,t,n){let a;switch(e){case"top":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":a={left:0,top:t,bottom:"auto"};break;case"topRight":a={right:0,top:t,bottom:"auto"};break;case"bottom":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":a={left:0,top:"auto",bottom:n};break;default:a={right:0,top:"auto",bottom:n};break}return a}function ma(e){return{motionName:`${e}-fade`}}function pa(e,t,n){return typeof e<"u"?e:typeof(t==null?void 0:t.closeIcon)<"u"?t.closeIcon:n==null?void 0:n.closeIcon}var fa=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};const Xt=24,ha=4.5,xa="topRight",va=({children:e,prefixCls:t})=>{const n=Ct(t),[a,i,l]=dn(t,n);return a(A.createElement(On,{classNames:{list:q(i,l,n)}},e))},ba=(e,{prefixCls:t,key:n})=>A.createElement(va,{prefixCls:t,key:n},e),ya=A.forwardRef((e,t)=>{const{top:n,bottom:a,prefixCls:i,getContainer:l,maxCount:d,rtl:u,onAllRemoved:g,stack:f,duration:m,pauseOnHover:$=!0,showProgress:S}=e,{getPrefixCls:P,getPopupContainer:w,notification:T,direction:M}=o.useContext(Fe),[,R]=Tn(),N=i||P("notification"),j=_=>ga(_,n??Xt,a??Xt),v=()=>q({[`${N}-rtl`]:u??M==="rtl"}),F=()=>ma(N),[O,D]=Rn({prefixCls:N,style:j,className:v,motion:F,closable:!0,closeIcon:Et(N),duration:m??ha,getContainer:()=>(l==null?void 0:l())||(w==null?void 0:w())||document.body,maxCount:d,pauseOnHover:$,showProgress:S,onAllRemoved:g,renderNotifications:ba,stack:f===!1?!1:{threshold:typeof f=="object"?f==null?void 0:f.threshold:void 0,offset:8,gap:R.margin}});return A.useImperativeHandle(t,()=>Object.assign(Object.assign({},O),{prefixCls:N,notification:T})),D});function gn(e){const t=A.useRef(null);return Dn(),[A.useMemo(()=>{const a=u=>{var g;if(!t.current)return;const{open:f,prefixCls:m,notification:$}=t.current,S=`${m}-notice`,{message:P,description:w,icon:T,type:M,btn:R,actions:N,className:j,style:v,role:F="alert",closeIcon:O,closable:D}=u,_=fa(u,["message","description","icon","type","btn","actions","className","style","role","closeIcon","closable"]),X=N??R,ee=Et(S,pa(O,e,$));return f(Object.assign(Object.assign({placement:(g=e==null?void 0:e.placement)!==null&&g!==void 0?g:xa},_),{content:A.createElement(un,{prefixCls:S,icon:T,type:M,message:P,description:w,actions:X,role:F}),className:q(M&&`${S}-${M}`,j,$==null?void 0:$.className),style:Object.assign(Object.assign({},$==null?void 0:$.style),v),closeIcon:ee,closable:D??!!ee}))},l={open:a,destroy:u=>{var g,f;u!==void 0?(g=t.current)===null||g===void 0||g.close(u):(f=t.current)===null||f===void 0||f.destroy()}};return["success","info","warning","error"].forEach(u=>{l[u]=g=>a(Object.assign(Object.assign({},g),{type:u}))}),l},[]),A.createElement(ya,Object.assign({key:"notification-holder"},e,{ref:t}))]}function $a(e){return gn(e)}function Nt(){return typeof BigInt=="function"}function mn(e){return!e&&e!==0&&!Number.isNaN(e)||!String(e).trim()}function Le(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var a=t||"0",i=a.split("."),l=i[0]||"0",d=i[1]||"0";l==="0"&&d==="0"&&(n=!1);var u=n?"-":"";return{negative:n,negativeStr:u,trimStr:a,integerStr:l,decimalStr:d,fullStr:"".concat(u).concat(a)}}function Pt(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function ke(e){var t=String(e);if(Pt(e)){var n=Number(t.slice(t.indexOf("e-")+2)),a=t.match(/\.(\d+)/);return a!=null&&a[1]&&(n+=a[1].length),n}return t.includes(".")&&Tt(t)?t.length-t.indexOf(".")-1:0}function pt(e){var t=String(e);if(Pt(e)){if(e>Number.MAX_SAFE_INTEGER)return String(Nt()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(Nt()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(ke(t))}return Le(t).fullStr}function Tt(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var Sa=function(){function e(t){if(tn(this,e),ne(this,"origin",""),ne(this,"negative",void 0),ne(this,"integer",void 0),ne(this,"decimal",void 0),ne(this,"decimalLen",void 0),ne(this,"empty",void 0),ne(this,"nan",void 0),mn(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var n=t;if(Pt(n)&&(n=Number(n)),n=typeof n=="string"?n:pt(n),Tt(n)){var a=Le(n);this.negative=a.negative;var i=a.trimStr.split(".");this.integer=BigInt(i[0]);var l=i[1]||"0";this.decimal=BigInt(l),this.decimalLen=l.length}else this.nan=!0}return en(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(n){var a="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(n,"0"));return BigInt(a)}},{key:"negate",value:function(){var n=new e(this.toString());return n.negative=!n.negative,n}},{key:"cal",value:function(n,a,i){var l=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),d=this.alignDecimal(l),u=n.alignDecimal(l),g=a(d,u).toString(),f=i(l),m=Le(g),$=m.negativeStr,S=m.trimStr,P="".concat($).concat(S.padStart(f+1,"0"));return new e("".concat(P.slice(0,-f),".").concat(P.slice(-f)))}},{key:"add",value:function(n){if(this.isInvalidate())return new e(n);var a=new e(n);return a.isInvalidate()?this:this.cal(a,function(i,l){return i+l},function(i){return i})}},{key:"multi",value:function(n){var a=new e(n);return this.isInvalidate()||a.isInvalidate()?new e(NaN):this.cal(a,function(i,l){return i*l},function(i){return i*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toString()===(n==null?void 0:n.toString())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":Le("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),Na=function(){function e(t){if(tn(this,e),ne(this,"origin",""),ne(this,"number",void 0),ne(this,"empty",void 0),mn(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return en(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(n){if(this.isInvalidate())return new e(n);var a=Number(n);if(Number.isNaN(a))return this;var i=this.number+a;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var l=Math.max(ke(this.number),ke(a));return new e(i.toFixed(l))}},{key:"multi",value:function(n){var a=Number(n);if(this.isInvalidate()||Number.isNaN(a))return new e(NaN);var i=this.number*a;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var l=Math.max(ke(this.number),ke(a));return new e(i.toFixed(l))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toNumber()===(n==null?void 0:n.toNumber())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":pt(this.number):this.origin}}]),e}();function Ne(e){return Nt()?new Sa(e):new Na(e)}function ct(e,t,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e==="")return"";var i=Le(e),l=i.negativeStr,d=i.integerStr,u=i.decimalStr,g="".concat(t).concat(u),f="".concat(l).concat(d);if(n>=0){var m=Number(u[n]);if(m>=5&&!a){var $=Ne(e).add("".concat(l,"0.").concat("0".repeat(n)).concat(10-m));return ct($.toString(),t,n,a)}return n===0?f:"".concat(f).concat(t).concat(u.padEnd(n,"0").slice(0,n))}return g===".0"?f:"".concat(f).concat(g)}function Ia(e,t){return typeof Proxy<"u"&&e?new Proxy(e,{get:function(a,i){if(t[i])return t[i];var l=a[i];return typeof l=="function"?l.bind(a):l}}):e}function wa(e,t){var n=o.useRef(null);function a(){try{var l=e.selectionStart,d=e.selectionEnd,u=e.value,g=u.substring(0,l),f=u.substring(d);n.current={start:l,end:d,value:u,beforeTxt:g,afterTxt:f}}catch{}}function i(){if(e&&n.current&&t)try{var l=e.value,d=n.current,u=d.beforeTxt,g=d.afterTxt,f=d.start,m=l.length;if(l.startsWith(u))m=u.length;else if(l.endsWith(g))m=l.length-n.current.afterTxt.length;else{var $=u[f-1],S=l.indexOf($,f-1);S!==-1&&(m=S+1)}e.setSelectionRange(m,m)}catch(P){Mn(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(P.message))}}return[a,i]}var ja=function(){var t=o.useState(!1),n=et(t,2),a=n[0],i=n[1];return zn(function(){i(_n())},[]),a},Ca=200,Ea=600;function Pa(e){var t=e.prefixCls,n=e.upNode,a=e.downNode,i=e.upDisabled,l=e.downDisabled,d=e.onStep,u=o.useRef(),g=o.useRef([]),f=o.useRef();f.current=d;var m=function(){clearTimeout(u.current)},$=function(j,v){j.preventDefault(),m(),f.current(v);function F(){f.current(v),u.current=setTimeout(F,Ca)}u.current=setTimeout(F,Ea)};o.useEffect(function(){return function(){m(),g.current.forEach(function(N){return gt.cancel(N)})}},[]);var S=ja();if(S)return null;var P="".concat(t,"-handler"),w=q(P,"".concat(P,"-up"),ne({},"".concat(P,"-up-disabled"),i)),T=q(P,"".concat(P,"-down"),ne({},"".concat(P,"-down-disabled"),l)),M=function(){return g.current.push(gt(m))},R={unselectable:"on",role:"button",onMouseUp:M,onMouseLeave:M};return o.createElement("div",{className:"".concat(P,"-wrap")},o.createElement("span",Ce({},R,{onMouseDown:function(j){$(j,!0)},"aria-label":"Increase Value","aria-disabled":i,className:w}),n||o.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),o.createElement("span",Ce({},R,{onMouseDown:function(j){$(j,!1)},"aria-label":"Decrease Value","aria-disabled":l,className:T}),a||o.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function Kt(e){var t=typeof e=="number"?pt(e):Le(e).fullStr,n=t.includes(".");return n?Le(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}const Ta=function(){var e=o.useRef(0),t=function(){gt.cancel(e.current)};return o.useEffect(function(){return t},[]),function(n){t(),e.current=gt(function(){n()})}};var Ra=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],Oa=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Jt=function(t,n){return t||n.isEmpty()?n.toString():n.toNumber()},Yt=function(t){var n=Ne(t);return n.isInvalidate()?null:n},Da=o.forwardRef(function(e,t){var n=e.prefixCls,a=e.className,i=e.style,l=e.min,d=e.max,u=e.step,g=u===void 0?1:u,f=e.defaultValue,m=e.value,$=e.disabled,S=e.readOnly,P=e.upHandler,w=e.downHandler,T=e.keyboard,M=e.changeOnWheel,R=M===void 0?!1:M,N=e.controls,j=N===void 0?!0:N;e.classNames;var v=e.stringMode,F=e.parser,O=e.formatter,D=e.precision,_=e.decimalSeparator,X=e.onChange,ee=e.onInput,se=e.onPressEnter,k=e.onStep,oe=e.changeOnBlur,Y=oe===void 0?!0:oe,re=e.domRef,Re=nn(e,Ra),xe="".concat(n,"-input"),le=o.useRef(null),me=o.useState(!1),Ee=et(me,2),we=Ee[0],H=Ee[1],ae=o.useRef(!1),pe=o.useRef(!1),ve=o.useRef(!1),ce=o.useState(function(){return Ne(m??f)}),je=et(ce,2),L=je[0],de=je[1];function qe(b){m===void 0&&de(b)}var te=o.useCallback(function(b,y){if(!y)return D>=0?D:Math.max(ke(b),ke(g))},[D,g]),_e=o.useCallback(function(b){var y=String(b);if(F)return F(y);var C=y;return _&&(C=C.replace(_,".")),C.replace(/[^\w.-]+/g,"")},[F,_]),Oe=o.useRef(""),De=o.useCallback(function(b,y){if(O)return O(b,{userTyping:y,input:String(Oe.current)});var C=typeof b=="number"?pt(b):b;if(!y){var E=te(C,y);if(Tt(C)&&(_||E>=0)){var x=_||".";C=ct(C,x,E)}}return C},[O,te,_]),Ue=o.useState(function(){var b=f??m;return L.isInvalidate()&&["string","number"].includes(kn(b))?Number.isNaN(b)?"":b:De(L.toString(),!1)}),Be=et(Ue,2),fe=Be[0],Ae=Be[1];Oe.current=fe;function be(b,y){Ae(De(b.isInvalidate()?b.toString(!1):b.toString(!y),y))}var ie=o.useMemo(function(){return Yt(d)},[d,D]),ye=o.useMemo(function(){return Yt(l)},[l,D]),V=o.useMemo(function(){return!ie||!L||L.isInvalidate()?!1:ie.lessEquals(L)},[ie,L]),Q=o.useMemo(function(){return!ye||!L||L.isInvalidate()?!1:L.lessEquals(ye)},[ye,L]),ue=wa(le.current,we),Me=et(ue,2),ft=Me[0],st=Me[1],Xe=function(y){return ie&&!y.lessEquals(ie)?ie:ye&&!ye.lessEquals(y)?ye:null},Ke=function(y){return!Xe(y)},Ve=function(y,C){var E=y,x=Ke(E)||E.isEmpty();if(!E.isEmpty()&&!C&&(E=Xe(E)||E,x=!0),!S&&!$&&x){var K=E.toString(),G=te(K,C);return G>=0&&(E=Ne(ct(K,".",G)),Ke(E)||(E=Ne(ct(K,".",G,!0)))),E.equals(L)||(qe(E),X==null||X(E.isEmpty()?null:Jt(v,E)),m===void 0&&be(E,C)),E}return L},at=Ta(),Je=function b(y){if(ft(),Oe.current=y,Ae(y),!pe.current){var C=_e(y),E=Ne(C);E.isNaN()||Ve(E,!0)}ee==null||ee(y),at(function(){var x=y;F||(x=y.replace(/。/g,".")),x!==y&&b(x)})},ht=function(){pe.current=!0},r=function(){pe.current=!1,Je(le.current.value)},c=function(y){Je(y.target.value)},p=function(y){var C;if(!(y&&V||!y&&Q)){ae.current=!1;var E=Ne(ve.current?Kt(g):g);y||(E=E.negate());var x=(L||Ne(0)).add(E.toString()),K=Ve(x,!1);k==null||k(Jt(v,K),{offset:ve.current?Kt(g):g,type:y?"up":"down"}),(C=le.current)===null||C===void 0||C.focus()}},h=function(y){var C=Ne(_e(fe)),E;C.isNaN()?E=Ve(L,y):E=Ve(C,y),m!==void 0?be(L,!1):E.isNaN()||be(E,!1)},I=function(){ae.current=!0},Z=function(y){var C=y.key,E=y.shiftKey;ae.current=!0,ve.current=E,C==="Enter"&&(pe.current||(ae.current=!1),h(!1),se==null||se(y)),T!==!1&&!pe.current&&["Up","ArrowUp","Down","ArrowDown"].includes(C)&&(p(C==="Up"||C==="ArrowUp"),y.preventDefault())},U=function(){ae.current=!1,ve.current=!1};o.useEffect(function(){if(R&&we){var b=function(E){p(E.deltaY<0),E.preventDefault()},y=le.current;if(y)return y.addEventListener("wheel",b,{passive:!1}),function(){return y.removeEventListener("wheel",b)}}});var B=function(){Y&&h(!1),H(!1),ae.current=!1};return vt(function(){L.isInvalidate()||be(L,!1)},[D,O]),vt(function(){var b=Ne(m);de(b);var y=Ne(_e(fe));(!b.equals(y)||!ae.current||O)&&be(b,ae.current)},[m]),vt(function(){O&&st()},[fe]),o.createElement("div",{ref:re,className:q(n,a,ne(ne(ne(ne(ne({},"".concat(n,"-focused"),we),"".concat(n,"-disabled"),$),"".concat(n,"-readonly"),S),"".concat(n,"-not-a-number"),L.isNaN()),"".concat(n,"-out-of-range"),!L.isInvalidate()&&!Ke(L))),style:i,onFocus:function(){H(!0)},onBlur:B,onKeyDown:Z,onKeyUp:U,onCompositionStart:ht,onCompositionEnd:r,onBeforeInput:I},j&&o.createElement(Pa,{prefixCls:n,upNode:P,downNode:w,upDisabled:V,downDisabled:Q,onStep:p}),o.createElement("div",{className:"".concat(xe,"-wrap")},o.createElement("input",Ce({autoComplete:"off",role:"spinbutton","aria-valuemin":l,"aria-valuemax":d,"aria-valuenow":L.isInvalidate()?null:L.toString(),step:g},Re,{ref:Ln(le,t),className:xe,value:fe,onChange:c,disabled:$,readOnly:S}))))}),Ma=o.forwardRef(function(e,t){var n=e.disabled,a=e.style,i=e.prefixCls,l=i===void 0?"rc-input-number":i,d=e.value,u=e.prefix,g=e.suffix,f=e.addonBefore,m=e.addonAfter,$=e.className,S=e.classNames,P=nn(e,Oa),w=o.useRef(null),T=o.useRef(null),M=o.useRef(null),R=function(j){M.current&&An(M.current,j)};return o.useImperativeHandle(t,function(){return Ia(M.current,{focus:R,nativeElement:w.current.nativeElement||T.current})}),o.createElement(Bn,{className:$,triggerFocus:R,prefixCls:l,value:d,disabled:n,style:a,prefix:u,suffix:g,addonAfter:m,addonBefore:f,classNames:S,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:w},o.createElement(Da,Ce({prefixCls:l,disabled:n,ref:M,domRef:T,className:S==null?void 0:S.input},P)))});const za=e=>{var t;const n=(t=e.handleVisible)!==null&&t!==void 0?t:"auto",a=e.controlHeightSM-e.lineWidth*2;return Object.assign(Object.assign({},Fn(e)),{controlWidth:90,handleWidth:a,handleFontSize:e.fontSize/2,handleVisible:n,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new Vn(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:n===!0?1:0,handleVisibleWidth:n===!0?a:0})},Qt=({componentCls:e,borderRadiusSM:t,borderRadiusLG:n},a)=>{const i=a==="lg"?n:t;return{[`&-${a}`]:{[`${e}-handler-wrap`]:{borderStartEndRadius:i,borderEndEndRadius:i},[`${e}-handler-up`]:{borderStartEndRadius:i},[`${e}-handler-down`]:{borderEndEndRadius:i}}}},_a=e=>{const{componentCls:t,lineWidth:n,lineType:a,borderRadius:i,inputFontSizeSM:l,inputFontSizeLG:d,controlHeightLG:u,controlHeightSM:g,colorError:f,paddingInlineSM:m,paddingBlockSM:$,paddingBlockLG:S,paddingInlineLG:P,colorIcon:w,motionDurationMid:T,handleHoverColor:M,handleOpacity:R,paddingInline:N,paddingBlock:j,handleBg:v,handleActiveBg:F,colorTextDisabled:O,borderRadiusSM:D,borderRadiusLG:_,controlWidth:X,handleBorderColor:ee,filledHandleBg:se,lineHeightLG:k,calc:oe}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},tt(e)),sn(e)),{display:"inline-block",width:X,margin:0,padding:0,borderRadius:i}),Wn(e,{[`${t}-handler-wrap`]:{background:v,[`${t}-handler-down`]:{borderBlockStart:`${z(n)} ${a} ${ee}`}}})),qn(e,{[`${t}-handler-wrap`]:{background:se,[`${t}-handler-down`]:{borderBlockStart:`${z(n)} ${a} ${ee}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:v}}})),Un(e,{[`${t}-handler-wrap`]:{background:v,[`${t}-handler-down`]:{borderBlockStart:`${z(n)} ${a} ${ee}`}}})),Xn(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:d,lineHeight:k,borderRadius:_,[`input${t}-input`]:{height:oe(u).sub(oe(n).mul(2)).equal(),padding:`${z(S)} ${z(P)}`}},"&-sm":{padding:0,fontSize:l,borderRadius:D,[`input${t}-input`]:{height:oe(g).sub(oe(n).mul(2)).equal(),padding:`${z($)} ${z(m)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:f}}},"&-group":Object.assign(Object.assign(Object.assign({},tt(e)),Jn(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:_,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:D}}},Yn(e)),Qn(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},tt(e)),{width:"100%",padding:`${z(j)} ${z(N)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${T} linear`,appearance:"textfield",fontSize:"inherit"}),Kn(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleVisibleWidth,opacity:R,height:"100%",borderStartStartRadius:0,borderStartEndRadius:i,borderEndEndRadius:i,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${T}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:w,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${z(n)} ${a} ${ee}`,transition:`all ${T} linear`,"&:active":{background:F},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:M}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},Zn()),{color:w,transition:`all ${T} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:i},[`${t}-handler-down`]:{borderEndEndRadius:i}},Qt(e,"lg")),Qt(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:O}})}]},Ba=e=>{const{componentCls:t,paddingBlock:n,paddingInline:a,inputAffixPadding:i,controlWidth:l,borderRadiusLG:d,borderRadiusSM:u,paddingInlineLG:g,paddingInlineSM:f,paddingBlockLG:m,paddingBlockSM:$,motionDurationMid:S}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${z(n)} 0`}},sn(e)),{position:"relative",display:"inline-flex",alignItems:"center",width:l,padding:0,paddingInlineStart:a,"&-lg":{borderRadius:d,paddingInlineStart:g,[`input${t}-input`]:{padding:`${z(m)} 0`}},"&-sm":{borderRadius:u,paddingInlineStart:f,[`input${t}-input`]:{padding:`${z($)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:i},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:a,marginInlineStart:i,transition:`margin ${S}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&:not(${t}-affix-wrapper-without-controls):hover ${t}-suffix`]:{marginInlineEnd:e.calc(e.handleWidth).add(a).equal()}})}},Aa=wt("InputNumber",e=>{const t=jt(e,Hn(e));return[_a(t),Ba(t),Gn(t)]},za,{unitless:{handleOpacity:!0}});var ka=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};const pn=o.forwardRef((e,t)=>{const{getPrefixCls:n,direction:a}=o.useContext(Fe),i=o.useRef(null);o.useImperativeHandle(t,()=>i.current);const{className:l,rootClassName:d,size:u,disabled:g,prefixCls:f,addonBefore:m,addonAfter:$,prefix:S,suffix:P,bordered:w,readOnly:T,status:M,controls:R,variant:N}=e,j=ka(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),v=n("input-number",f),F=Ct(v),[O,D,_]=Aa(v,F),{compactSize:X,compactItemClassnames:ee}=es(v,a);let se=o.createElement(Zs,{className:`${v}-handler-up-inner`}),k=o.createElement(as,{className:`${v}-handler-down-inner`});const oe=typeof R=="boolean"?R:void 0;typeof R=="object"&&(se=typeof R.upIcon>"u"?se:o.createElement("span",{className:`${v}-handler-up-inner`},R.upIcon),k=typeof R.downIcon>"u"?k:o.createElement("span",{className:`${v}-handler-down-inner`},R.downIcon));const{hasFeedback:Y,status:re,isFormItemInput:Re,feedbackIcon:xe}=o.useContext(ts),le=rs(re,M),me=an(L=>{var de;return(de=u??X)!==null&&de!==void 0?de:L}),Ee=o.useContext(ns),we=g??Ee,[H,ae]=ss("inputNumber",N,w),pe=Y&&o.createElement(o.Fragment,null,xe),ve=q({[`${v}-lg`]:me==="large",[`${v}-sm`]:me==="small",[`${v}-rtl`]:a==="rtl",[`${v}-in-form-item`]:Re},D),ce=`${v}-group`,je=o.createElement(Ma,Object.assign({ref:i,disabled:we,className:q(_,F,l,d,ee),upHandler:se,downHandler:k,prefixCls:v,readOnly:T,controls:oe,prefix:S,suffix:pe||P,addonBefore:m&&o.createElement(Bt,{form:!0,space:!0},m),addonAfter:$&&o.createElement(Bt,{form:!0,space:!0},$),classNames:{input:ve,variant:q({[`${v}-${H}`]:ae},_t(v,le,Y)),affixWrapper:q({[`${v}-affix-wrapper-sm`]:me==="small",[`${v}-affix-wrapper-lg`]:me==="large",[`${v}-affix-wrapper-rtl`]:a==="rtl",[`${v}-affix-wrapper-without-controls`]:R===!1||we},D),wrapper:q({[`${ce}-rtl`]:a==="rtl"},D),groupWrapper:q({[`${v}-group-wrapper-sm`]:me==="small",[`${v}-group-wrapper-lg`]:me==="large",[`${v}-group-wrapper-rtl`]:a==="rtl",[`${v}-group-wrapper-${H}`]:ae},_t(`${v}-group-wrapper`,le,Y),D)}},j));return O(je)}),It=pn,La=e=>o.createElement(rn,{theme:{components:{InputNumber:{handleVisible:!0}}}},o.createElement(pn,Object.assign({},e)));It._InternalPanelDoNotUseOrYouWillBeFired=La;const Rt=A.createContext({});Rt.Consumer;var fn=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};const Fa=e=>{var{prefixCls:t,className:n,avatar:a,title:i,description:l}=e,d=fn(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:u}=o.useContext(Fe),g=u("list",t),f=q(`${g}-item-meta`,n),m=A.createElement("div",{className:`${g}-item-meta-content`},i&&A.createElement("h4",{className:`${g}-item-meta-title`},i),l&&A.createElement("div",{className:`${g}-item-meta-description`},l));return A.createElement("div",Object.assign({},d,{className:f}),a&&A.createElement("div",{className:`${g}-item-meta-avatar`},a),(i||l)&&m)},Va=A.forwardRef((e,t)=>{const{prefixCls:n,children:a,actions:i,extra:l,styles:d,className:u,classNames:g,colStyle:f}=e,m=fn(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:$,itemLayout:S}=o.useContext(Rt),{getPrefixCls:P,list:w}=o.useContext(Fe),T=D=>{var _,X;return q((X=(_=w==null?void 0:w.item)===null||_===void 0?void 0:_.classNames)===null||X===void 0?void 0:X[D],g==null?void 0:g[D])},M=D=>{var _,X;return Object.assign(Object.assign({},(X=(_=w==null?void 0:w.item)===null||_===void 0?void 0:_.styles)===null||X===void 0?void 0:X[D]),d==null?void 0:d[D])},R=()=>{let D=!1;return o.Children.forEach(a,_=>{typeof _=="string"&&(D=!0)}),D&&o.Children.count(a)>1},N=()=>S==="vertical"?!!l:!R(),j=P("list",n),v=i&&i.length>0&&A.createElement("ul",{className:q(`${j}-item-action`,T("actions")),key:"actions",style:M("actions")},i.map((D,_)=>A.createElement("li",{key:`${j}-item-action-${_}`},D,_!==i.length-1&&A.createElement("em",{className:`${j}-item-action-split`})))),F=$?"div":"li",O=A.createElement(F,Object.assign({},m,$?{}:{ref:t},{className:q(`${j}-item`,{[`${j}-item-no-flex`]:!N()},u)}),S==="vertical"&&l?[A.createElement("div",{className:`${j}-item-main`,key:"content"},a,v),A.createElement("div",{className:q(`${j}-item-extra`,T("extra")),key:"extra",style:M("extra")},l)]:[a,v,is(l,{key:"extra"})]);return $?A.createElement(ws,{ref:t,flex:1,style:f},O):O}),hn=Va;hn.Meta=Fa;const Ha=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:a,margin:i,itemPaddingSM:l,itemPaddingLG:d,marginLG:u,borderRadiusLG:g}=e;return{[t]:{border:`${z(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:g,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:a},[`${n}-pagination`]:{margin:`${z(i)} ${z(u)}`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:l}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:d}}}},Ga=e=>{const{componentCls:t,screenSM:n,screenMD:a,marginLG:i,marginSM:l,margin:d}=e;return{[`@media screen and (max-width:${a}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${n}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:l}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${z(d)}`}}}}}},Wa=e=>{const{componentCls:t,antCls:n,controlHeight:a,minHeight:i,paddingSM:l,marginLG:d,padding:u,itemPadding:g,colorPrimary:f,itemPaddingSM:m,itemPaddingLG:$,paddingXS:S,margin:P,colorText:w,colorTextDescription:T,motionDurationSlow:M,lineWidth:R,headerBg:N,footerBg:j,emptyTextPadding:v,metaMarginBottom:F,avatarMarginRight:O,titleMarginBottom:D,descriptionFontSize:_}=e;return{[t]:Object.assign(Object.assign({},tt(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:N},[`${t}-footer`]:{background:j},[`${t}-header, ${t}-footer`]:{paddingBlock:l},[`${t}-pagination`]:{marginBlockStart:d,[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:g,color:w,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:O},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:w},[`${t}-item-meta-title`]:{margin:`0 0 ${z(e.marginXXS)} 0`,color:w,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:w,transition:`all ${M}`,"&:hover":{color:f}}},[`${t}-item-meta-description`]:{color:T,fontSize:_,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${z(S)}`,color:T,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:R,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${z(u)} 0`,color:T,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:v,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:P,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:d},[`${t}-item-meta`]:{marginBlockEnd:F,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:D,color:w,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:u,marginInlineStart:"auto","> li":{padding:`0 ${z(u)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${z(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${z(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${z(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:a},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${z(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:$},[`${t}-sm ${t}-item`]:{padding:m},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},qa=e=>({contentWidth:220,itemPadding:`${z(e.paddingContentVertical)} 0`,itemPaddingSM:`${z(e.paddingContentVerticalSM)} ${z(e.paddingContentHorizontal)}`,itemPaddingLG:`${z(e.paddingContentVerticalLG)} ${z(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),Ua=wt("List",e=>{const t=jt(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[Wa(t),Ha(t),Ga(t)]},qa);var Xa=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n};function Ka(e,t){const{pagination:n=!1,prefixCls:a,bordered:i=!1,split:l=!0,className:d,rootClassName:u,style:g,children:f,itemLayout:m,loadMore:$,grid:S,dataSource:P=[],size:w,header:T,footer:M,loading:R=!1,rowKey:N,renderItem:j,locale:v}=e,F=Xa(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),O=n&&typeof n=="object"?n:{},[D,_]=o.useState(O.defaultCurrent||1),[X,ee]=o.useState(O.defaultPageSize||10),{getPrefixCls:se,direction:k,className:oe,style:Y}=os("list"),{renderEmpty:re}=o.useContext(Fe),Re={current:1,total:0,position:"bottom"},xe=V=>(Q,ue)=>{var Me;_(Q),ee(ue),n&&((Me=n==null?void 0:n[V])===null||Me===void 0||Me.call(n,Q,ue))},le=xe("onChange"),me=xe("onShowSizeChange"),Ee=(V,Q)=>{if(!j)return null;let ue;return typeof N=="function"?ue=N(V):N?ue=V[N]:ue=V.key,ue||(ue=`list-item-${Q}`),o.createElement(o.Fragment,{key:ue},j(V,Q))},we=!!($||n||M),H=se("list",a),[ae,pe,ve]=Ua(H);let ce=R;typeof ce=="boolean"&&(ce={spinning:ce});const je=!!(ce!=null&&ce.spinning),L=an(w);let de="";switch(L){case"large":de="lg";break;case"small":de="sm";break}const qe=q(H,{[`${H}-vertical`]:m==="vertical",[`${H}-${de}`]:de,[`${H}-split`]:l,[`${H}-bordered`]:i,[`${H}-loading`]:je,[`${H}-grid`]:!!S,[`${H}-something-after-last-item`]:we,[`${H}-rtl`]:k==="rtl"},oe,d,u,pe,ve),te=ls(Re,{total:P.length,current:D,pageSize:X},n||{}),_e=Math.ceil(te.total/te.pageSize);te.current=Math.min(te.current,_e);const Oe=n&&o.createElement("div",{className:q(`${H}-pagination`)},o.createElement(Cs,Object.assign({align:"end"},te,{onChange:le,onShowSizeChange:me})));let De=At(P);n&&P.length>(te.current-1)*te.pageSize&&(De=At(P).splice((te.current-1)*te.pageSize,te.pageSize));const Ue=Object.keys(S||{}).some(V=>["xs","sm","md","lg","xl","xxl"].includes(V)),Be=Ts(Ue),fe=o.useMemo(()=>{for(let V=0;V<Wt.length;V+=1){const Q=Wt[V];if(Be[Q])return Q}},[Be]),Ae=o.useMemo(()=>{if(!S)return;const V=fe&&S[fe]?S[fe]:S.column;if(V)return{width:`${100/V}%`,maxWidth:`${100/V}%`}},[JSON.stringify(S),fe]);let be=je&&o.createElement("div",{style:{minHeight:53}});if(De.length>0){const V=De.map(Ee);be=S?o.createElement(js,{gutter:S.gutter},o.Children.map(V,Q=>o.createElement("div",{key:Q==null?void 0:Q.key,style:Ae},Q))):o.createElement("ul",{className:`${H}-items`},V)}else!f&&!je&&(be=o.createElement("div",{className:`${H}-empty-text`},(v==null?void 0:v.emptyText)||(re==null?void 0:re("List"))||o.createElement(cs,{componentName:"List"})));const ie=te.position,ye=o.useMemo(()=>({grid:S,itemLayout:m}),[JSON.stringify(S),m]);return ae(o.createElement(Rt.Provider,{value:ye},o.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},Y),g),className:qe},F),(ie==="top"||ie==="both")&&Oe,T&&o.createElement("div",{className:`${H}-header`},T),o.createElement(Es,Object.assign({},ce),be,f),M&&o.createElement("div",{className:`${H}-footer`},M),$||(ie==="bottom"||ie==="both")&&Oe)))}const Ja=o.forwardRef(Ka),dt=Ja;dt.Item=hn;let Ie=null,ut=e=>e(),mt=[],nt={};function Zt(){const{getContainer:e,rtl:t,maxCount:n,top:a,bottom:i,showProgress:l,pauseOnHover:d}=nt,u=(e==null?void 0:e())||document.body;return{getContainer:()=>u,rtl:t,maxCount:n,top:a,bottom:i,showProgress:l,pauseOnHover:d}}const Ya=A.forwardRef((e,t)=>{const{notificationConfig:n,sync:a}=e,{getPrefixCls:i}=o.useContext(Fe),l=nt.prefixCls||i("notification"),d=o.useContext(gs),[u,g]=gn(Object.assign(Object.assign(Object.assign({},n),{prefixCls:l}),d.notification));return A.useEffect(a,[]),A.useImperativeHandle(t,()=>{const f=Object.assign({},u);return Object.keys(f).forEach(m=>{f[m]=(...$)=>(a(),u[m].apply(u,$))}),{instance:f,sync:a}}),g}),Qa=A.forwardRef((e,t)=>{const[n,a]=A.useState(Zt),i=()=>{a(Zt)};A.useEffect(i,[]);const l=us(),d=l.getRootPrefixCls(),u=l.getIconPrefixCls(),g=l.getTheme(),f=A.createElement(Ya,{ref:t,sync:i,notificationConfig:n});return A.createElement(rn,{prefixCls:d,iconPrefixCls:u,theme:g},l.holderRender?l.holderRender(f):f)});function Ot(){if(!Ie){const e=document.createDocumentFragment(),t={fragment:e};Ie=t,ut(()=>{ds()(A.createElement(Qa,{ref:a=>{const{instance:i,sync:l}=a||{};Promise.resolve().then(()=>{!t.instance&&i&&(t.instance=i,t.sync=l,Ot())})}}),e)});return}Ie.instance&&(mt.forEach(e=>{switch(e.type){case"open":{ut(()=>{Ie.instance.open(Object.assign(Object.assign({},nt),e.config))});break}case"destroy":ut(()=>{Ie==null||Ie.instance.destroy(e.key)});break}}),mt=[])}function Za(e){nt=Object.assign(Object.assign({},nt),e),ut(()=>{var t;(t=Ie==null?void 0:Ie.sync)===null||t===void 0||t.call(Ie)})}function xn(e){mt.push({type:"open",config:e}),Ot()}const er=e=>{mt.push({type:"destroy",key:e}),Ot()},tr=["success","info","warning","error"],nr={open:xn,destroy:er,config:Za,useNotification:$a,_InternalPanelDoNotUseOrYouWillBeFired:ua},vn=nr;tr.forEach(e=>{vn[e]=t=>xn(Object.assign(Object.assign({},t),{type:e}))});const{TextArea:sr}=Os,{Panel:Sr}=_s,{Text:Te}=xs,ar=()=>localStorage.getItem("configNotificationDismissed")==="true",bn=e=>{localStorage.setItem("configNotificationDismissed",e.toString())},rr=(e,t)=>{const n=ar(),a=e.length===0||t.length===0;return a||bn(!1),a&&!n};let lt=!1;const Nr=()=>{const{t:e}=ms(),[t]=Ge.useForm(),[n,a]=o.useState(null),[i,l]=o.useState([]),[d,u]=o.useState([]),[g,f]=o.useState([]),[m,$]=o.useState([""]),[S,P]=o.useState(!1),[w,T]=o.useState(!0),[M,R]=o.useState(!1),N=o.useRef(null),j=o.useRef(null),[v,F]=o.useState(1),[O,D]=o.useState(0),[_,X]=o.useState(0),[ee,se]=o.useState(!1),[k,oe]=o.useState(null),[Y,re]=o.useState([]),[Re,xe]=o.useState(!1),{clearDraft:le}=ps(),[me,Ee]=o.useState(null);fs(me,!0,3e3),o.useEffect(()=>{const r=t.getFieldValue("repetitions")||1;F(r)},[t]),o.useEffect(()=>{const r=m.filter(c=>c.trim()).length;D(r),X(r*v)},[m,v]);const we=()=>{const r=t.getFieldValue("repetitions")||1;F(r)};o.useEffect(()=>{j.current=n},[n]);const H=()=>{var p;const r=ot.getCurrentSession(),c=(p=r==null?void 0:r.user)==null?void 0:p.id;if(c)try{const h=localStorage.getItem(`${c}_current_test_session`);if(h){const I=JSON.parse(h);if(I.status==="completed"||I.status==="stopped")return console.log("[TestingPanel] 恢复session状态:",I.id),a(I),!0}}catch(h){console.error("[TestingPanel] 恢复session状态失败:",h)}return!1},ae=()=>{var p;const r=ot.getCurrentSession(),c=(p=r==null?void 0:r.user)==null?void 0:p.id;if(c)try{localStorage.removeItem(`${c}_current_test_session`)}catch(h){console.error("[TestingPanel] 清除持久化session失败:",h)}};o.useEffect(()=>{const r=t.getFieldsValue(),c=i.find(h=>h.id===r.promptId),p=d.find(h=>h.id===r.modelId);if(r.promptId||r.modelId||m.some(h=>h.trim())){const h={userInputs:m.filter(I=>I.trim()),promptId:r.promptId||"",modelId:r.modelId||"",repetitions:r.repetitions||1,interval:r.interval||1e3,selectedPromptName:c==null?void 0:c.name,selectedModelName:p==null?void 0:p.name};Ee(h)}else Ee(null)},[t,m,i,d]);const pe=async(r,c)=>{var p,h;try{if(console.log("[TestingPanel] saveTestHistory 调用参数:",{testSession:r,status:c,params:r.params,results:r.results,resultsLength:((p=r.results)==null?void 0:p.length)||0}),!r.params||!r.results||r.results.length===0){console.log("[TestingPanel] 没有有效的测试数据，跳过保存历史"),console.log("[TestingPanel] 详细检查:",{hasParams:!!r.params,hasResults:!!r.results,resultsLength:((h=r.results)==null?void 0:h.length)||0,results:r.results});return}const I={total:r.results.length,success:r.results.filter(x=>x.status==="success").length,error:r.results.filter(x=>x.status==="error").length,pending:r.results.filter(x=>x.status==="pending").length},Z=r.results.filter(x=>x.duration&&x.duration>0).map(x=>x.duration),U=Z.length>0?Z.reduce((x,K)=>x+K,0)/Z.length:0,B=i.find(x=>x.id===r.params.promptId),b=d.find(x=>x.id===r.params.modelId),C={sessionName:`${(B==null?void 0:B.name)||"未知提示词"} - ${(b==null?void 0:b.name)||"未知模型"} (${new Date().toLocaleString()})`,testParams:r.params,results:r.results,status:c,startTime:r.startTime||new Date().toISOString(),endTime:r.endTime||new Date().toISOString(),totalTests:I.total,successCount:I.success,errorCount:I.error,averageDuration:U};console.log("[TestingPanel] 准备保存的历史数据:",{sessionName:C.sessionName,resultsCount:C.results.length,status:C.status,stats:{total:I.total,success:I.success,error:I.error},firstResult:C.results[0],lastResult:C.results[C.results.length-1]});const E=await ot.saveTestSessionHistory(C);E?console.log("[TestingPanel] 测试历史已保存:",E.id):console.error("[TestingPanel] 测试历史保存失败")}catch(I){console.error("[TestingPanel] 保存测试历史失败:",I)}};o.useEffect(()=>(console.log("[TestingPanel] 组件挂载，开始加载数据"),(()=>{var Z;const p=ot.getCurrentSession(),h=(Z=p==null?void 0:p.user)==null?void 0:Z.id,I="mb7t2ui1tq0hjniy7ap";if(h&&h!==I){console.log(`[TestingPanel] 尝试从 ${I} 迁移数据到 ${h}`);const U=localStorage.getItem(`${I}_prompts`);U&&!localStorage.getItem(`${h}_prompts`)&&(localStorage.setItem(`${h}_prompts`,U),console.log("[TestingPanel] 提示词数据已迁移"));const B=localStorage.getItem(`${I}_apiConfigs`);B&&!localStorage.getItem(`${h}_apiConfigs`)&&(localStorage.setItem(`${h}_apiConfigs`,B),console.log("[TestingPanel] API配置数据已迁移"));const b=localStorage.getItem(`${I}_test_session_history`);b&&!localStorage.getItem(`${h}_test_session_history`)&&(localStorage.setItem(`${h}_test_session_history`,b),console.log("[TestingPanel] 测试历史数据已迁移"))}if(h&&!localStorage.getItem(`${h}_prompts`)){console.log("[TestingPanel] 创建测试数据");const U=[{id:"prompt-test-1",name:"测试提示词1",content:"你是一个AI助手，请根据用户输入回答问题：{{userInput}}",description:"用于测试的基础提示词",category:"测试",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];localStorage.setItem(`${h}_prompts`,JSON.stringify(U));const B=[{id:"api-yunwu-1",name:"云雾AI配置",baseUrl:"http://yunwu.ai/v1",apiKey:"",type:"openai",models:[{id:"o4-mini-model",modelId:"o4-mini",name:"o4-mini",displayName:"o4-mini",description:"云雾AI的o4-mini模型",enabled:!0}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];localStorage.setItem(`${h}_apiConfigs`,JSON.stringify(B)),console.log("[TestingPanel] 测试数据已创建")}})(),ve(),H()&&console.log("[TestingPanel] session状态已恢复"),()=>{console.log("[TestingPanel] 组件卸载")}),[]);const ve=()=>{var r;console.log("[TestingPanel] 开始加载数据..."),T(!0),R(!1);try{const c=localStorage.getItem("userSession"),p=c?(r=JSON.parse(c).user)==null?void 0:r.id:null,h=localStorage.getItem(p?`${p}_prompts`:"prompts"),I=localStorage.getItem(p?`${p}_apiConfigs`:"apiConfigs"),Z=localStorage.getItem(p?`${p}_defaultTestInputs`:"defaultTestInputs");console.log("[TestingPanel] 原始数据:",{userId:p,prompts:h,apiConfigs:I,defaultInputs:Z});const U=hs.getAll(),B=Qe.getAllModels(),b=bt.getAll();console.log("[TestingPanel] 加载的数据:",{prompts:U.length,models:B.length,defaultInputs:b.length}),console.log("[TestingPanel] 详细数据:",{prompts:U,models:B,defaultInputs:b}),console.log("[TestingPanel] 模型数据详细调试:"),console.log("[TestingPanel] - 获取到的模型数量:",B.length),console.log("[TestingPanel] - 模型详细列表:",B);const y=Qe.getAll();console.log("[TestingPanel] - API配置数量:",y.length),y.forEach((C,E)=>{var x;console.log(`[TestingPanel] - 配置${E+1}: ${C.name}, 模型数量: ${((x=C.models)==null?void 0:x.length)||0}`),C.models&&C.models.forEach((K,G)=>{console.log(`[TestingPanel]   - 模型${G+1}: ${K.name||K.modelId} (enabled: ${K.enabled})`)})}),l(U),u(B),f(b),U.length>0&&B.length>0&&(lt=!1,R(!1)),U.length===0&&B.length===0&&(console.log("[TestingPanel] 没有数据，尝试初始化..."),ce(U,B))}catch(c){console.error("[TestingPanel] 加载数据失败:",c),W.error("加载数据失败，请检查存储状态")}finally{T(!1)}},ce=(r,c)=>{console.log("[TestingPanel] 初始化默认数据...");try{if(bt.getAll().length===0){console.log("[TestingPanel] 初始化默认测试输入");const h=bt.getAll();f(h)}rr(r,c)&&!M&&!lt&&(console.log("[TestingPanel] 显示配置提醒通知"),R(!0),lt=!0,vn.warning({key:"config-reminder",message:"配置提醒",description:s.jsxs("div",{children:[r.length===0&&s.jsx("div",{children:'• 请先在"提示词管理"中添加提示词'}),c.length===0&&s.jsx("div",{children:'• 请先在"API配置"中添加API配置和模型'}),s.jsx("div",{className:"mt-2 text-gray-500",children:"配置完成后此提醒将不再显示"})]}),duration:0,placement:"topRight",onClose:()=>{bn(!0),R(!1),lt=!1}}))}catch(p){console.error("[TestingPanel] 初始化默认数据失败:",p)}},je=()=>{console.log("[TestingPanel] 手动刷新数据"),ve(),W.success("数据已刷新")},L=()=>{$([...m,""])},de=r=>{if(m.length>1){const c=m.filter((p,h)=>h!==r);$(c)}},qe=(r,c)=>{const p=[...m];p[r]=c,$(p)},te=r=>{$([...m,r.content]),P(!1),W.success(`已添加默认输入: ${r.name}`)},_e=async()=>{console.log("[TestingPanel] 🚀 handleStartTest 被调用"),console.log("[TestingPanel] 📊 当前状态:",{session:n==null?void 0:n.status,prompts:i.length,models:d.length,userInputs:m.length,form:t.getFieldsValue()});try{console.log("[TestingPanel] 📝 开始表单验证...");const r=await t.validateFields();console.log("[TestingPanel] ✅ 表单验证通过:",r);const c=m.filter(B=>B.trim());if(console.log("[TestingPanel] 📝 有效输入数量:",c.length),c.length===0){console.log("[TestingPanel] ❌ 没有有效输入"),W.error(e("testing.pleaseInputAtLeastOne"));return}const p=i.find(B=>B.id===r.promptId),h=Qe.getModelInfo(r.modelId);if(console.log("[TestingPanel] 🔍 查找结果:",{promptId:r.promptId,modelId:r.modelId,prompt:p?`${p.name} (找到)`:"未找到",modelInfo:h?`${h.model.name||h.model.modelId} (${h.apiConfig.name})`:"未找到"}),!p){console.log("[TestingPanel] ❌ 提示词未找到"),W.error("请选择提示词");return}if(!h){console.log("[TestingPanel] ❌ 模型信息未找到"),W.error("请选择模型");return}console.log("[TestingPanel] 🎯 准备开始测试...");const I={userInputs:c,promptId:r.promptId,modelId:r.modelId,repetitions:r.repetitions||1,interval:r.interval||1e3},Z=c.length*I.repetitions;console.log("[TestingPanel] 📈 测试参数:",{userInputs:I.userInputs.length,promptId:I.promptId,modelId:I.modelId,repetitions:I.repetitions,interval:I.interval,totalTests:Z});const U={id:`session-${Date.now()}`,params:I,results:[],status:"running",startTime:new Date().toISOString(),progress:{current:0,total:Z}};console.log("[TestingPanel] 🏁 设置新session:",U.id),a(U),N.current=new AbortController,console.log("[TestingPanel] 🚀 开始执行测试..."),await Oe(U,p,h)}catch(r){console.error("[TestingPanel] ❌ 启动测试失败:",r),console.error("[TestingPanel] 错误详情:",{name:r.name,message:r.message,stack:r.stack}),W.error(`启动测试失败: ${r.message}`)}},Oe=async(r,c,p)=>{var U;const{params:h}=r,{apiConfig:I,model:Z}=p;try{const B=[];let b=0;for(let x=0;x<h.userInputs.length;x++){const K=h.userInputs[x];for(let G=0;G<h.repetitions;G++)B.push({userInput:K,repetitionIndex:G+1,resultId:`result-${Date.now()}-${b}`,taskIndex:b++})}const y=B.map(x=>({id:x.resultId,userInput:x.userInput,promptName:c.name,modelName:`${Z.name||Z.modelId} (${I.name})`,repetitionIndex:x.repetitionIndex,output:"",status:"pending",timestamp:new Date().toISOString()}));a(x=>x?{...x,results:[...x.results,...y]}:null);const C=async(x,K)=>{var Dt,Mt,zt;if(K>0)try{await new Promise((Pe,ge)=>{const $e=setTimeout(Pe,K);N.current&&N.current.signal.addEventListener("abort",()=>{clearTimeout($e),ge(new Error("操作已中止"))})})}catch{console.log(`[TestingPanel] 任务 ${x.taskIndex} 延迟期间被中止`);return}if((Dt=N.current)!=null&&Dt.signal.aborted){console.log(`[TestingPanel] 任务 ${x.taskIndex} 检测到中止信号，跳过执行`);return}const G=j.current;if((G==null?void 0:G.status)==="paused"){console.log(`[TestingPanel] 任务 ${x.taskIndex} 检测到暂停状态，跳过执行`);return}if((G==null?void 0:G.status)==="stopped"){console.log(`[TestingPanel] 任务 ${x.taskIndex} 检测到停止状态，跳过执行`);return}const yn=Date.now();try{console.log(`[TestingPanel] 开始API调用 ${x.taskIndex+1}/${B.length}`);const Pe=Z.modelId||Z.name,ge=await ys(I,Pe,c.content,x.userInput,(Mt=N.current)==null?void 0:Mt.signal);if(console.log(`[TestingPanel] 任务 ${x.taskIndex} API调用成功，总耗时 ${ge.totalDuration}ms，请求耗时 ${ge.requestDuration}ms${ge.processingDuration?`，处理耗时 ${ge.processingDuration}ms`:""}`),(zt=N.current)!=null&&zt.signal.aborted){console.log(`[TestingPanel] 任务 ${x.taskIndex} API调用完成后检测到中止信号`);return}a($e=>{if(!$e)return null;const Ye=$e.results.map(Se=>Se.id===x.resultId?{...Se,output:ge.output,status:"success",duration:ge.totalDuration,requestDuration:ge.requestDuration,processingDuration:ge.processingDuration}:Se),xt=Ye.filter(Se=>Se.status!=="pending").length;return{...$e,results:Ye,progress:{...$e.progress,current:xt}}})}catch(Pe){const ge=Date.now()-yn;if(console.log(`[TestingPanel] 任务 ${x.taskIndex} API调用失败:`,Pe.message),Pe.message==="请求已被取消"||Pe.message==="操作已中止"){console.log(`[TestingPanel] 任务 ${x.taskIndex} 请求被取消`);return}a($e=>{if(!$e)return null;const Ye=$e.results.map(Se=>Se.id===x.resultId?{...Se,status:"error",errorMessage:Pe.message||"未知错误",duration:ge,requestDuration:ge}:Se),xt=Ye.filter(Se=>Se.status!=="pending").length;return{...$e,results:Ye,progress:{...$e.progress,current:xt}}})}},E=B.map((x,K)=>C(x,K*h.interval));if(await Promise.allSettled(E),!((U=N.current)!=null&&U.signal.aborted)){console.log("[TestingPanel] 所有测试任务已启动完成"),await new Promise(G=>setTimeout(G,100));const x=j.current;if(!x){console.error("[TestingPanel] 当前session为空，无法完成测试");return}const K=x.results.filter(G=>G.status==="pending");if(K.length===0){console.log("[TestingPanel] 所有测试完成");const G={...x,status:"completed",endTime:new Date().toISOString()};a(G),await pe(G,"completed"),le(),W.success("测试完成！")}else console.log(`[TestingPanel] 还有 ${K.length} 个任务未完成，继续等待...`)}}catch(B){console.error("[TestingPanel] 测试执行失败:",B),a(b=>b?{...b,status:"stopped",endTime:new Date().toISOString()}:null),B.message!=="请求已被取消"&&B.message!=="操作已中止"&&W.error(`测试失败: ${B.message}`)}},De=()=>{(n==null?void 0:n.status)==="running"&&(a(r=>r?{...r,status:"paused"}:null),W.info(e("testing.testPaused")))},Ue=()=>{(n==null?void 0:n.status)==="paused"&&a(r=>r?{...r,status:"running"}:null)},Be=async()=>{if(console.log("[TestingPanel] 用户点击停止测试"),j.current){const r={...j.current,status:"stopped"};a(r),j.current=r}if(N.current&&(console.log("[TestingPanel] 取消正在进行的请求"),N.current.abort(),N.current=null),j.current&&j.current.results.length>0)try{await pe(j.current,"stopped")}catch(r){console.error("[TestingPanel] 保存测试历史失败:",r)}W.info(e("testing.testStopped"))},fe=()=>{a(null),le(),ae(),W.success("结果已清空")},Ae=()=>{if(!(n!=null&&n.results)||n.results.length===0){W.warning(e("testing.noDataToExport"));return}Ss(n.results),W.success(e("testing.excelExportSuccess"))},be=()=>{if(!(n!=null&&n.results)||n.results.length===0){W.warning(e("testing.noDataToExport"));return}Ns(n.results),W.success(e("testing.csvExportSuccess"))},ie=()=>{if(!(n!=null&&n.results)||n.results.length===0){W.warning(e("testing.noDataToCopy"));return}Is(n.results),W.success(e("testing.resultsCopied"))},ye=r=>{$s(r),W.success(e("testing.contentCopied"))},V=r=>{oe(r),se(!0)},Q=r=>{if(!n)return;const c=n.results.filter(p=>p.id!==r);a({...n,results:c}),re(p=>p.filter(h=>h!==r)),W.success("结果已删除")},ue=(r,c)=>{re(c?p=>[...p,r]:p=>p.filter(h=>h!==r))},Me=r=>{xe(r),re(r&&n?n.results.map(c=>c.id):[])},ft=()=>{if(!n||Y.length===0)return;const r=n.results.filter(c=>!Y.includes(c.id));a({...n,results:r}),re([]),xe(!1),W.success(`已删除 ${Y.length} 条结果`)};o.useEffect(()=>{if(n&&n.results.length>0){const r=n.results.every(c=>Y.includes(c.id));xe(r)}},[Y,n==null?void 0:n.results]);const st=r=>{switch(r){case"pending":return"processing";case"success":return"success";case"error":return"error";default:return"default"}},Xe=r=>{switch(r){case"pending":return"处理中";case"success":return"成功";case"error":return"失败";default:return"未知"}},Ke=()=>{if(!n||n.results.length===0)return{total:0,success:0,error:0,pending:0};const r=n.results.length,c=n.results.filter(I=>I.status==="success").length,p=n.results.filter(I=>I.status==="error").length,h=n.results.filter(I=>I.status==="pending").length;return{total:r,success:c,error:p,pending:h}},Ve=[{title:s.jsx(Vt,{checked:Re,indeterminate:Y.length>0&&!Re,onChange:r=>Me(r.target.checked)}),key:"select",width:50,fixed:"left",render:(r,c)=>s.jsx(Vt,{checked:Y.includes(c.id),onChange:p=>ue(c.id,p.target.checked)})},{title:"#",key:"index",width:60,fixed:"left",render:(r,c,p)=>p+1},{title:e("testing.userInput"),dataIndex:"userInput",key:"userInput",width:200,ellipsis:{showTitle:!1},render:r=>s.jsx(he,{title:r,placement:"topLeft",children:s.jsx(Te,{children:r})})},{title:e("testing.prompt"),dataIndex:"promptName",key:"promptName",width:120},{title:e("testing.model"),dataIndex:"modelName",key:"modelName",width:150},{title:e("testing.repetitionCount"),dataIndex:"repetitionIndex",key:"repetitionIndex",width:80,align:"center"},{title:e("testing.output"),dataIndex:"output",key:"output",width:350,ellipsis:{showTitle:!1},render:(r,c)=>s.jsx(he,{title:c.status==="error"?c.errorMessage:r,placement:"topLeft",children:s.jsx(Te,{children:c.status==="error"?c.errorMessage:r})})},{title:"请求耗时",dataIndex:"requestDuration",key:"requestDuration",width:90,render:r=>r?`${r}ms`:"-"},{title:"处理耗时",dataIndex:"processingDuration",key:"processingDuration",width:90,render:(r,c)=>{if(r&&r>0)return`${r}ms`;const p=(c==null?void 0:c.duration)||0,h=(c==null?void 0:c.requestDuration)||0,I=p-h;return I>0?`${I}ms`:"-"}},{title:e("testing.timestampField"),dataIndex:"timestamp",key:"timestamp",width:120,render:r=>new Date(r).toLocaleTimeString()},{title:e("testing.statusField"),dataIndex:"status",key:"status",width:80,fixed:"right",render:r=>s.jsx(ze,{color:st(r),children:Xe(r)})},{title:e("testing.actionField"),key:"action",width:150,fixed:"right",render:(r,c)=>s.jsxs(Gt,{size:"small",children:[s.jsx(he,{title:e("results.viewDetails"),children:s.jsx(J,{type:"text",icon:s.jsx(qt,{}),size:"small",onClick:()=>V(c),className:"text-blue-500 hover:bg-blue-50"})}),s.jsx(he,{title:c.status==="error"?e("testing.copyError"):e("testing.copyOutput"),children:s.jsx(J,{type:"text",icon:s.jsx(rt,{}),size:"small",onClick:()=>ye(c),disabled:c.status==="pending",className:"text-green-500 hover:bg-green-50"})}),s.jsx(Ht,{title:e("results.confirmDeleteSingle"),onConfirm:()=>Q(c.id),okText:e("common.confirm"),cancelText:e("common.cancel"),children:s.jsx(he,{title:e("results.delete"),children:s.jsx(J,{type:"text",icon:s.jsx(yt,{}),size:"small",className:"text-red-500 hover:bg-red-50"})})})]})}],at=(n==null?void 0:n.status)==="running",Je=(n==null?void 0:n.status)==="paused",ht=!n||n.status==="completed"||n.status==="stopped";return o.useEffect(()=>{const r=p=>{if(p.key&&(p.key.endsWith("_apiConfigs")||p.key==="apiConfigs")){console.log("[TestingPanel] 检测到API配置变化，重新加载模型列表");const h=Qe.getAllModels();console.log("[TestingPanel] 重新加载的模型数量:",h.length),u(h),W.success("模型列表已更新")}},c=()=>{console.log("[TestingPanel] 收到API配置更新事件，重新加载模型列表");const p=Qe.getAllModels();console.log("[TestingPanel] 重新加载的模型数量:",p.length),u(p),W.success("模型列表已更新")};return window.addEventListener("storage",r),window.addEventListener("apiConfigsUpdated",c),()=>{window.removeEventListener("storage",r),window.removeEventListener("apiConfigsUpdated",c)}},[]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx(He,{className:"col-span-1",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:i.length+d.length}),s.jsx("div",{className:"text-sm text-gray-500 mb-4",children:e("testing.configTotal")}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-green-700",children:i.length}),s.jsx("div",{className:"text-green-600",children:e("testing.prompts")})]}),s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[s.jsx("div",{className:"font-semibold text-blue-700",children:d.length}),s.jsx("div",{className:"text-blue-600",children:e("testing.models")})]})]})]})}),s.jsx(He,{className:"col-span-2",title:e("testing.config"),children:s.jsxs(Ge,{form:t,layout:"vertical",onValuesChange:we,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Ge.Item,{name:"promptId",label:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kt,{className:"text-blue-500 flex-shrink-0"}),s.jsx(he,{title:e("testing.selectPrompt"),placement:"top",children:s.jsx("span",{className:"truncate",children:e("testing.selectPrompt")})}),s.jsxs(ze,{color:"blue",className:"flex-shrink-0",children:[i.length," ",e("status.available")]})]}),rules:[{required:!0,message:e("testing.pleaseSelectPrompt")}],children:s.jsx(it,{placeholder:w?e("testing.loading"):i.length>0?e("testing.pleaseSelectPrompt"):e("testing.noPrompts"),size:"large",showSearch:!0,disabled:w||i.length===0,loading:w,notFoundContent:i.length===0?e("testing.noPrompts"):e("testing.notFoundContent"),children:i.map(r=>s.jsx(it.Option,{value:r.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kt,{className:"text-blue-500 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:r.name})]})},r.id))})}),s.jsx(Ge.Item,{name:"modelId",label:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{className:"text-green-500 flex-shrink-0"}),s.jsx(he,{title:e("testing.selectModel"),placement:"top",children:s.jsx("span",{className:"truncate",children:e("testing.selectModel")})}),s.jsxs(ze,{color:"green",className:"flex-shrink-0",children:[d.length," ",e("status.available")]})]}),rules:[{required:!0,message:e("testing.pleaseSelectModel")}],children:s.jsx(it,{placeholder:w?e("testing.loading"):d.length>0?e("testing.pleaseSelectModel"):e("testing.noModels"),size:"large",showSearch:!0,disabled:w||d.length===0,loading:w,notFoundContent:d.length===0?e("testing.noModels"):e("testing.notFoundContent"),children:d.map(r=>s.jsx(it.Option,{value:r.id,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[s.jsx(Lt,{className:"text-green-500 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:r.name})]}),s.jsx(ze,{color:"default",className:"flex-shrink-0 ml-2",children:r.apiConfigName})]})},r.id))})}),s.jsx(Ge.Item,{name:"repetitions",label:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($t,{className:"text-orange-500 flex-shrink-0"}),s.jsx(he,{title:e("testing.repetitions"),placement:"top",children:s.jsx("span",{className:"truncate",children:e("testing.repetitions")})})]}),initialValue:1,rules:[{required:!0,message:e("testing.pleaseInputRepetitions")}],children:s.jsx(It,{min:1,max:10,size:"large",style:{width:"100%"}})}),s.jsx(Ge.Item,{name:"interval",label:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ks,{className:"text-purple-500 flex-shrink-0"}),s.jsx(he,{title:e("testing.interval"),placement:"top",children:s.jsx("span",{className:"truncate",children:e("testing.interval")})})]}),initialValue:3e3,rules:[{required:!0,message:e("testing.pleaseInputInterval")}],children:s.jsx(It,{min:100,max:1e4,size:"large",style:{width:"100%"}})})]}),!w&&(i.length===0||d.length===0)&&s.jsx(Rs,{message:e("testing.configIncomplete"),description:s.jsxs("div",{className:"space-y-1",children:[i.length===0&&s.jsx("div",{children:e("testing.addPromptsFirst")}),d.length===0&&s.jsx("div",{children:e("testing.addModelsFirst")})]}),type:"warning",showIcon:!0,className:"mt-4",action:s.jsx(J,{size:"small",onClick:je,icon:s.jsx($t,{}),children:e("testing.refreshData")})})]})})]}),s.jsx(He,{title:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bs,{className:"text-blue-500"}),s.jsx("span",{children:e("testing.inputs")}),s.jsx(he,{title:e("testing.batchInputTooltip"),placement:"right",children:s.jsx(Ms,{className:"text-gray-400 hover:text-blue-500 cursor-help flex-shrink-0"})})]}),extra:s.jsxs(Gt,{wrap:!0,children:[s.jsx(he,{title:e("testing.useTemplate"),placement:"top",children:s.jsx(J,{type:"dashed",icon:s.jsx(Ds,{}),onClick:()=>P(!0),size:"large",className:"min-w-0",children:s.jsx("span",{className:"hidden sm:inline",children:e("testing.useTemplate")})})}),s.jsx(he,{title:e("testing.addInput"),placement:"top",children:s.jsx(J,{type:"primary",icon:s.jsx(vs,{}),onClick:L,size:"large",className:"min-w-0",children:s.jsx("span",{className:"hidden sm:inline",children:e("testing.addInput")})})})]}),className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:s.jsx("div",{className:"space-y-4",children:m.map((r,c)=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 border-b border-gray-200 rounded-t-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:c+1}),s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[e("testing.testInput")," ",c+1]}),s.jsxs(ze,{color:"blue",children:[e("testing.willTest")," ",v," ",e("testing.times")]})]}),m.length>1&&s.jsx(J,{type:"text",danger:!0,icon:s.jsx(yt,{}),onClick:()=>de(c),size:"small"})]}),s.jsx("div",{className:"p-4",children:s.jsx(sr,{value:r,onChange:p=>qe(c,p.target.value),placeholder:`${e("testing.inputPlaceholder")} ${c+1}...`,rows:4,className:"border-0 shadow-none resize-none",style:{padding:0}})})]},c))})}),s.jsx(He,{className:"bg-gradient-to-r from-gray-50 to-slate-50 border-gray-200",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg px-4 py-4 border border-gray-200 shadow-sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:O}),s.jsx("div",{className:"text-sm text-gray-500",children:e("testing.validInputs")})]})}),s.jsx("div",{className:"bg-white rounded-lg px-4 py-4 border border-gray-200 shadow-sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:v}),s.jsx("div",{className:"text-sm text-gray-500",children:e("testing.eachTest")})]})}),s.jsx("div",{className:"bg-white rounded-lg px-4 py-4 border border-gray-200 shadow-sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:_}),s.jsx("div",{className:"text-sm text-gray-500",children:e("testing.totalTests")})]})})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[ht&&s.jsx(J,{type:"primary",icon:s.jsx(Ut,{}),onClick:_e,size:"large",className:"bg-green-500 hover:bg-green-600 border-green-500 shadow-lg",children:e("testing.startTest")}),at&&s.jsx(J,{icon:s.jsx(Vs,{}),onClick:De,size:"large",className:"bg-orange-500 hover:bg-orange-600 text-white border-orange-500",children:e("testing.pauseTest")}),Je&&s.jsx(J,{type:"primary",icon:s.jsx(Ut,{}),onClick:Ue,size:"large",className:"bg-blue-500 hover:bg-blue-600 border-blue-500",children:e("testing.resumeTest")}),(at||Je)&&s.jsx(J,{danger:!0,icon:s.jsx(Us,{}),onClick:Be,size:"large",className:"shadow-lg",children:e("testing.stopTest")}),n&&n.results.length>0&&s.jsx(J,{icon:s.jsx($t,{}),onClick:fe,size:"large",className:"border-gray-300",children:e("testing.clearResults")})]}),n&&n.results.length>0&&s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx(J,{icon:s.jsx(St,{}),onClick:Ae,size:"large",className:"bg-green-50 text-green-600 border-green-200 hover:bg-green-100",children:e("testing.exportExcel")}),s.jsx(J,{icon:s.jsx(St,{}),onClick:be,size:"large",className:"bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100",children:e("testing.exportCSV")}),s.jsx(J,{icon:s.jsx(rt,{}),onClick:ie,size:"large",className:"bg-purple-50 text-purple-600 border-purple-200 hover:bg-purple-100",children:e("testing.copyResults")})]})]})]})}),n&&s.jsx(He,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx(Te,{className:"font-medium text-lg",children:e("testing.progress")})]}),s.jsxs(ze,{color:"blue",className:"text-base px-3 py-1",children:[n.progress.current," / ",n.progress.total]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${n.status==="running"?"bg-green-500 animate-pulse":n.status==="paused"?"bg-orange-500":n.status==="completed"?"bg-green-500":"bg-gray-500"}`}),s.jsx(Te,{type:"secondary",className:"text-base",children:n.status==="running"?e("testing.statusRunning"):n.status==="paused"?e("testing.statusPaused"):n.status==="completed"?e("testing.statusCompleted"):e("testing.statusStopped")})]})]}),s.jsx(zs,{percent:Math.round(n.progress.current/n.progress.total*100),status:n.status==="running"?"active":n.status==="completed"?"success":"normal",strokeColor:n.status==="completed"?"#22c55e":n.status==="running"?"#1890ff":"#d9d9d9",trailColor:n.status==="completed"?"#dcfce7":"#f5f5f5",strokeWidth:12,className:"mb-2",showInfo:!0,format:r=>s.jsxs("span",{style:{color:n.status==="completed"?"#16a34a":n.status==="running"?"#1890ff":"#8c8c8c",fontWeight:"bold",fontSize:"16px"},children:[r,"%"]})}),s.jsxs("div",{className:"text-sm text-gray-600 text-center font-medium",children:[n.status==="running"&&e("testing.executing"),n.status==="paused"&&e("testing.testPausedMessage"),n.status==="completed"&&e("testing.allCompleted"),n.status==="stopped"&&e("testing.testStoppedMessage")]})]})}),n&&n.results.length>0&&s.jsxs(He,{title:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:s.jsx(Js,{className:"text-white text-lg"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:e("testing.results")}),s.jsx("p",{className:"text-sm text-gray-500 m-0",children:e("testing.detailedResults")})]})]}),s.jsx("div",{className:"flex items-center space-x-3",children:(()=>{const r=Ke();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600",children:e("results.success")}),s.jsx("span",{className:"text-sm font-semibold text-green-600",children:r.success})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600",children:e("results.failed")}),s.jsx("span",{className:"text-sm font-semibold text-red-600",children:r.error})]}),r.pending>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm text-gray-600",children:e("status.pending")}),s.jsx("span",{className:"text-sm font-semibold text-blue-600",children:r.pending})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600",children:e("status.total")}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:r.total})]})]})})()})]}),className:"shadow-sm border-gray-200",bodyStyle:{padding:"0 12px 24px 12px"},children:[s.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200 -mx-6 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[e("testing.showResults")," ",n==null?void 0:n.results.length," ",e("testing.resultsCount")]}),Y.length>0&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-blue-600",children:[e("results.selected")," ",Y.length," ",e("results.items")]}),s.jsx(Ht,{title:`${e("testing.confirmBatchDelete")} ${Y.length} ${e("testing.confirmDeleteItems")}`,onConfirm:ft,okText:e("testing.confirmDeleteBtn"),cancelText:e("common.cancel"),children:s.jsx(J,{type:"primary",danger:!0,size:"small",icon:s.jsx(yt,{}),children:e("results.batchDelete")})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(J,{icon:s.jsx(St,{}),size:"small",onClick:Ae,children:"Excel"}),s.jsx(J,{icon:s.jsx(rt,{}),size:"small",onClick:ie,children:e("testing.copy")})]})]})}),s.jsx(Ps,{columns:Ve,dataSource:(n==null?void 0:n.results)||[],rowKey:"id",pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:(r,c)=>e("common.pagination",{start:c[0],end:c[1],total:r})},scroll:{x:1200,y:600},size:"small",className:"custom-table",rowClassName:r=>{const c="hover:bg-blue-50 transition-colors";return r.status==="success"?`${c} border-l-4 border-l-green-500`:r.status==="error"?`${c} border-l-4 border-l-red-500`:r.status==="pending"?`${c} border-l-4 border-l-blue-500`:c}})]}),s.jsx(Ft,{title:e("testing.selectDefaultInput"),open:S,onCancel:()=>P(!1),footer:null,width:600,children:s.jsx(dt,{dataSource:g,renderItem:r=>s.jsx(dt.Item,{actions:[s.jsx(J,{type:"link",onClick:()=>te(r),children:e("common.use")})],children:s.jsx(dt.Item.Meta,{title:r.name,description:s.jsxs("div",{children:[s.jsx(ze,{color:"blue",children:r.category}),s.jsx("div",{className:"mt-2",children:r.content})]})})})})}),s.jsx(Ft,{title:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qt,{className:"text-blue-500"}),s.jsx("span",{children:e("testing.resultDetails")})]}),open:ee,onCancel:()=>se(!1),footer:[s.jsx(J,{icon:s.jsx(rt,{}),onClick:()=>k&&ye(k),children:e("testing.copyResult")},"copy"),s.jsx(J,{onClick:()=>se(!1),children:e("common.close")},"close")],width:800,children:k&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs(Te,{strong:!0,className:"text-gray-700",children:[e("testing.statusField"),":"]}),s.jsx("div",{className:"mt-2",children:s.jsx(ze,{color:st(k.status),className:"text-sm",children:Xe(k.status)})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs(Te,{strong:!0,className:"text-gray-700",children:[e("testing.duration"),":"]}),s.jsx("div",{className:"mt-2 text-lg font-semibold text-blue-600",children:k.duration?`${k.duration}ms`:"-"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs(Te,{strong:!0,className:"text-gray-700 block mb-3",children:[e("testing.testConfig"),":"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[e("testing.promptField"),":"]}),s.jsx("span",{className:"ml-2 font-medium",children:k.promptName})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[e("testing.modelField"),":"]}),s.jsx("span",{className:"ml-2 font-medium",children:k.modelName})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[e("testing.repetitionField"),":"]}),s.jsx("span",{className:"ml-2 font-medium",children:e("testing.repetitionIndex",{index:k.repetitionIndex})})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[e("testing.executionTime"),":"]}),s.jsx("span",{className:"ml-2 font-medium",children:new Date(k.timestamp).toLocaleString("zh-CN")})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs(Te,{strong:!0,className:"text-gray-700",children:[e("testing.userInputField"),":"]}),s.jsx("div",{className:"mt-3 p-4 bg-white rounded border whitespace-pre-wrap shadow-sm",children:k.userInput})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx(Te,{strong:!0,className:"text-gray-700",children:k.status==="error"?e("testing.errorMessage")+":":e("testing.outputField")+":"}),s.jsx("div",{className:`mt-3 p-4 rounded border whitespace-pre-wrap shadow-sm ${k.status==="error"?"bg-red-50 border-red-200":"bg-white"}`,children:k.status==="error"?k.errorMessage:k.output})]})]})})]})};export{Nr as default};
