<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿®å¤éªŒè¯ - APIé…ç½®Modal</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
        .container { max-width: 1000px; margin: 0 auto; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
        .test-case { margin: 15px 0; padding: 10px; background: #f8f9fa; border-left: 4px solid #007bff; }
        .success { background: #d4edda; border-left-color: #28a745; }
        .warning { background: #fff3cd; border-left-color: #ffc107; }
        .error { background: #f8d7da; border-left-color: #dc3545; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        pre { background: #f1f1f1; padding: 10px; border-radius: 4px; overflow-x: auto; font-size: 12px; }
        .step { margin: 10px 0; padding: 8px; background: #e3f2fd; border-radius: 4px; }
        .result { margin: 10px 0; padding: 8px; background: #f3e5f5; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>APIé…ç½®Modalä¿®å¤éªŒè¯</h1>
        <p>æœ¬é¡µé¢ç”¨äºéªŒè¯"æ·»åŠ æ¨¡å‹ååˆ‡æ¢tabä¸¢å¤±é…ç½®"é—®é¢˜çš„ä¿®å¤æ•ˆæœ</p>
        
        <div class="section">
            <h2>ğŸ”§ ä¿®å¤æ–¹æ¡ˆæ¦‚è¿°</h2>
            <div class="test-case">
                <h3>ä¸»è¦ä¿®å¤æªæ–½ï¼š</h3>
                <ul>
                    <li><strong>Form.List Refç®¡ç†</strong>ï¼šä½¿ç”¨useRefä¿å­˜Form.Listçš„add/removeæ“ä½œæ¥å£</li>
                    <li><strong>è¡¨å•æ•°æ®å¤‡ä»½</strong>ï¼šåœ¨Tabåˆ‡æ¢æ—¶å¤‡ä»½å’Œæ¢å¤è¡¨å•æ•°æ®</li>
                    <li><strong>çŠ¶æ€åŒæ­¥æ£€æµ‹</strong>ï¼šæ£€æµ‹æ¨¡å‹æ•°æ®ä¸¢å¤±å¹¶è‡ªåŠ¨æ¢å¤</li>
                    <li><strong>TabçŠ¶æ€ç®¡ç†</strong>ï¼šä½¿ç”¨å—æ§çš„activeKeyé˜²æ­¢çŠ¶æ€å†²çª</li>
                    <li><strong>åµŒå¥—Tabsä¼˜åŒ–</strong>ï¼šå°†æ¨¡å‹åˆ†ç»„çš„åµŒå¥—Tabsæ”¹ä¸ºCollapseé¿å…å†²çª</li>
                </ul>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ§ª æµ‹è¯•æ­¥éª¤</h2>
            <div class="step">
                <strong>æ­¥éª¤1ï¼š</strong> æ‰“å¼€åº”ç”¨
                <button onclick="openApp()">æ‰“å¼€åº”ç”¨</button>
                <div id="step1-result"></div>
            </div>
            
            <div class="step">
                <strong>æ­¥éª¤2ï¼š</strong> æµ‹è¯•APIé…ç½®ç®¡ç†
                <button onclick="testApiConfig()">æµ‹è¯•é…ç½®ç®¡ç†</button>
                <div id="step2-result"></div>
            </div>
            
            <div class="step">
                <strong>æ­¥éª¤3ï¼š</strong> éªŒè¯æ§åˆ¶å°æ—¥å¿—
                <button onclick="checkConsole()">æ£€æŸ¥æ§åˆ¶å°</button>
                <div id="step3-result"></div>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“‹ æµ‹è¯•æ¸…å•</h2>
            <div class="test-case">
                <h3>éœ€è¦éªŒè¯çš„åŠŸèƒ½ç‚¹ï¼š</h3>
                <div class="checklist">
                    <label><input type="checkbox" id="check1"> 1. æ·»åŠ APIé…ç½®åŸºæœ¬ä¿¡æ¯</label><br>
                    <label><input type="checkbox" id="check2"> 2. åˆ‡æ¢åˆ°æ¨¡å‹é…ç½®Tab</label><br>
                    <label><input type="checkbox" id="check3"> 3. è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨</label><br>
                    <label><input type="checkbox" id="check4"> 4. é€‰æ‹©å¹¶æ·»åŠ å¤šä¸ªæ¨¡å‹</label><br>
                    <label><input type="checkbox" id="check5"> 5. åˆ‡æ¢å›åŸºæœ¬é…ç½®Tab</label><br>
                    <label><input type="checkbox" id="check6"> 6. å†æ¬¡åˆ‡æ¢åˆ°æ¨¡å‹é…ç½®Tab</label><br>
                    <label><input type="checkbox" id="check7"> 7. éªŒè¯æ·»åŠ çš„æ¨¡å‹ä»ç„¶å­˜åœ¨</label><br>
                    <label><input type="checkbox" id="check8"> 8. ä¿å­˜é…ç½®æˆåŠŸ</label><br>
                    <label><input type="checkbox" id="check9"> 9. é…ç½®åœ¨TestingPanelä¸­å¯è§</label><br>
                </div>
                <br>
                <button onclick="resetChecklist()">é‡ç½®æ¸…å•</button>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ› è°ƒè¯•ä¿¡æ¯</h2>
            <div class="test-case">
                <h3>å…³é”®è°ƒè¯•ç‚¹ï¼š</h3>
                <pre id="debug-info">
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¸­çš„ä»¥ä¸‹æ—¥å¿—ï¼š

1. [ApiConfigManagement] Tabåˆ‡æ¢: basic -> models
2. [ApiConfigManagement] å¤‡ä»½è¡¨å•æ•°æ®: {name: "...", models: [...]}
3. [ApiConfigManagement] Tabåˆ‡æ¢åçš„è¡¨å•æ•°æ®: {...}
4. [ApiConfigManagement] å¼€å§‹æ·»åŠ é€‰ä¸­çš„æ¨¡å‹: [...]
5. [ApiConfigManagement] ä½¿ç”¨Form.List refçš„addæ–¹æ³•
6. [ApiConfigManagement] éªŒè¯è¡¨å•è®¾ç½®ç»“æœ: [...]

å¦‚æœçœ‹åˆ°"æ£€æµ‹åˆ°æ¨¡å‹æ•°æ®ä¸¢å¤±ï¼Œä»å¤‡ä»½æ¢å¤"è¯´æ˜ä¿®å¤æœºåˆ¶å·²ç”Ÿæ•ˆã€‚
                </pre>
            </div>
            
            <div class="test-case">
                <h3>å¸¸è§é—®é¢˜æ’æŸ¥ï¼š</h3>
                <ul>
                    <li><strong>æ¨¡å‹ä»ç„¶ä¸¢å¤±</strong>ï¼šæ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ï¼Œç¡®è®¤å¤‡ä»½æ¢å¤æœºåˆ¶æ˜¯å¦è§¦å‘</li>
                    <li><strong>æ·»åŠ æ¨¡å‹æ— æ•ˆæœ</strong>ï¼šç¡®è®¤Form.List refæ˜¯å¦æ­£ç¡®è®¾ç½®</li>
                    <li><strong>Tabåˆ‡æ¢å¼‚å¸¸</strong>ï¼šæ£€æŸ¥activeKeyçŠ¶æ€ç®¡ç†æ˜¯å¦æ­£å¸¸</li>
                </ul>
            </div>
        </div>
        
        <div class="section">
            <h2>âœ… é¢„æœŸç»“æœ</h2>
            <div class="test-case success">
                <h3>æˆåŠŸæ ‡å‡†ï¼š</h3>
                <ul>
                    <li>âœ… åœ¨"æ¨¡å‹é…ç½®"Tabä¸­æ·»åŠ æ¨¡å‹åï¼Œåˆ‡æ¢Tabä¸ä¼šä¸¢å¤±æ¨¡å‹æ•°æ®</li>
                    <li>âœ… ä¿å­˜é…ç½®æˆåŠŸï¼Œæ‰€æœ‰æ¨¡å‹éƒ½è¢«æ­£ç¡®ä¿å­˜</li>
                    <li>âœ… åœ¨TestingPanelä¸­å¯ä»¥çœ‹åˆ°å¹¶é€‰æ‹©æ–°æ·»åŠ çš„æ¨¡å‹</li>
                    <li>âœ… æ§åˆ¶å°æ˜¾ç¤ºæ­£ç¡®çš„è°ƒè¯•æ—¥å¿—ï¼Œæ— é”™è¯¯ä¿¡æ¯</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        function openApp() {
            const result = document.getElementById('step1-result');
            window.open('http://localhost:5678/#/api-config', '_blank');
            result.innerHTML = '<div class="result">âœ… å·²æ‰“å¼€APIé…ç½®ç®¡ç†é¡µé¢</div>';
        }
        
        function testApiConfig() {
            const result = document.getElementById('step2-result');
            result.innerHTML = `
                <div class="result">
                    <p>ğŸ“ è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æµ‹è¯•ï¼š</p>
                    <ol>
                        <li>ç‚¹å‡»"æ·»åŠ é…ç½®"æŒ‰é’®</li>
                        <li>å¡«å†™é…ç½®åç§°ï¼š"ä¿®å¤æµ‹è¯•é…ç½®"</li>
                        <li>é€‰æ‹©"APIæ¥å£"æ¨¡å¼</li>
                        <li>Base URL: "https://yunwu.ai/v1"</li>
                        <li>API Key: ""</li>
                        <li>åˆ‡æ¢åˆ°"æ¨¡å‹é…ç½®"tab</li>
                        <li>ç‚¹å‡»"è·å–æ¨¡å‹"</li>
                        <li>é€‰æ‹©å‡ ä¸ªæ¨¡å‹å¹¶æ·»åŠ </li>
                        <li>åˆ‡æ¢å›"åŸºæœ¬é…ç½®"tab</li>
                        <li>å†æ¬¡åˆ‡æ¢åˆ°"æ¨¡å‹é…ç½®"tab</li>
                        <li>éªŒè¯æ¨¡å‹æ˜¯å¦è¿˜åœ¨</li>
                    </ol>
                </div>
            `;
        }
        
        function checkConsole() {
            const result = document.getElementById('step3-result');
            result.innerHTML = `
                <div class="result">
                    <p>ğŸ” æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)ï¼Œåœ¨Consoleæ ‡ç­¾é¡µä¸­æŸ¥çœ‹æ—¥å¿—ï¼š</p>
                    <p>æ­£å¸¸æƒ…å†µä¸‹åº”è¯¥çœ‹åˆ°ä»¥"[ApiConfigManagement]"å¼€å¤´çš„è°ƒè¯•ä¿¡æ¯ã€‚</p>
                    <p>å¦‚æœçœ‹åˆ°"ä»å¤‡ä»½æ¢å¤"çš„æ—¥å¿—ï¼Œè¯´æ˜ä¿®å¤æœºåˆ¶æ­£åœ¨å·¥ä½œã€‚</p>
                </div>
            `;
        }
        
        function resetChecklist() {
            for (let i = 1; i <= 9; i++) {
                document.getElementById('check' + i).checked = false;
            }
        }
        
        // è‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰å¤é€‰æ¡†çŠ¶æ€
        setInterval(() => {
            let checkedCount = 0;
            for (let i = 1; i <= 9; i++) {
                if (document.getElementById('check' + i).checked) {
                    checkedCount++;
                }
            }
            
            if (checkedCount === 9) {
                if (!document.getElementById('success-message')) {
                    const msg = document.createElement('div');
                    msg.id = 'success-message';
                    msg.className = 'test-case success';
                    msg.innerHTML = '<h3>ğŸ‰ æ­å–œï¼æ‰€æœ‰æµ‹è¯•é¡¹ç›®éƒ½å·²å®Œæˆï¼</h3><p>ä¿®å¤éªŒè¯æˆåŠŸï¼Œé—®é¢˜å·²è§£å†³ã€‚</p>';
                    document.querySelector('.checklist').after(msg);
                }
            }
        }, 1000);
    </script>
</body>
</html> 